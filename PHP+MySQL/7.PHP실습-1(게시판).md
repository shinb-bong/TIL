실습 1
자유로운 게시판
---
목표: 로그인(실습2에서 진행) 없이 자유롭게 이용할 수 있는 게시판

주요 기능
 - 글쓰기
 - 글 목록보기
 - 글 내용보기
 - 글 수정하기
 - 글 삭제하기

구성 

- DB테이블
- CSS
- 페이지: 글쓰기 폼,글 목록 보기, 비밀번호 폼 양식, 글 수정 폼 양식, 글 내용 보기

- 기능 구현: DB에 저장된 비밀번호 확인, DB에 글 저장, DB에서 글 수정, DB에서 글삭제

DB 테이블 생성
--

```
create table freeboard (
   num int not null auto_increment,
   name char(20) not null,
   pass char(20) not null,    
   subject char(200) not null,
   content text,
   regist_day char(20),
   primary key(num)
);
```

글쓰기 폼 양식
---
```
<!DOCTYPE html>
<html>
<head> 
<meta charset="utf-8">
<title>PHP+MySQL 입문</title>
<link rel="stylesheet" href="style.css">
<script>
  	function check_input() {
		if (!document.board.name.value) {		// 이름 체크
          	alert("이름을 입력하세요!");
          	document.board.name.focus();
          	return;
		}		  
		if (!document.board.pass.value) {		// 비밀번호 체크
          	alert("비밀번호를 입력하세요!");    
          	document.board.pass.focus();
          	return;
      	}			
      	if (!document.board.subject.value) {	// 제목 체크
          	alert("제목을 입력하세요!");
          	document.board.subject.focus();
          	return;
		}
      	if (!document.board.content.value) {	// 내용 체크
          	alert("내용을 입력하세요!");    
          	document.board.content.focus();
          	return;
      	}
	  
      	document.board.submit();
   	}
</script>
</head>
<body> 
	<h2>자유 게시판 > 글쓰기</h2>
	<form name="board" method="post" action="insert.php">
	    <ul class="board_form">
			<li>
				<span class="col1">이름 : </span>
				<span class="col2"><input name="name" type="text"></span>
			</li>		
	    	<li>	
	    		<span class="col1">비밀번호 : </span>
	    		<span class="col2">
					<input name="pass" type="password">
	    		</span>
	    	</li>				
	    	<li>
	    		<span class="col1">제목 : </span>
	    		<span class="col2"><input name="subject" type="text"></span>
	    	</li>	    	
	    	<li class="area">	
	    		<span class="col1">내용 : </span>
	    		<span class="col2">
	    			<textarea name="content"></textarea>
	    		</span>
	    	</li>
	    </ul>
	    <ul class="buttons">
			<li><button type="button" onclick="check_input()">저장하기</button></li>
			<li><button type="button" onclick="location.href='list.php'">목록보기</button></li>
		</ul>
	</form>
</body>
</html>

```

- document.board.{name}.value : 해당 값이 입력 되어있으면 그걸로 반환 없으면 False

- 버튼의 onClick으로 함수 실행

- form 태그의 name과 method, action 확인 *앞에서 다룬내용*

여기서 action에 적혀있는 insert.php 코드를 살펴보면

```
<?php
	$name = $_POST["name"];				// 이름
	$pass = $_POST["pass"];				// 비밀번호
    $subject = $_POST["subject"];		// 제목
    $content = $_POST["content"];		// 내용

	$subject = htmlspecialchars($subject, ENT_QUOTES);	// 제목 HTML 특수문자 변환
	$content = htmlspecialchars($content, ENT_QUOTES);	// 내용 HTML 특수문자 변환 
	$regist_day = date("Y-m-d (H:i)");  // UTC 기준 현재의 '년-월-일 (시:분)'

	$con = mysqli_connect("localhost", "user", "12345", "sample");	// DB 연결

	$sql = "insert into freeboard (name, pass, subject, content, regist_day) ";	// 레코드 삽입 명령
	$sql .= "values('$name', '$pass', '$subject', '$content', '$regist_day')";

	mysqli_query($con, $sql);  // $sql에 저장된 명령 실행

	mysqli_close($con);       // DB 연결 끊기

	// 목록 페이지로 이동
	echo "<script>
	    location.href = 'list.php';
	   </script>";
?>

```
추가적으로 배운 내용은

넣기전에 특수문자를 
HTML로 변환 시켜준다, ENT_QUOTES: "와 ' 는 변환시키지않는다는 옵션
가 있다.

글 목록 보기
---

```
<!DOCTYPE html>
<html>
<head> 
<meta charset="utf-8">
<title>PHP+MySQL 입문</title>
<link rel="stylesheet"  href="style.css">
</head>
<body> 
	<h2>자유 게시판 > 목록보기</h2>
	<ul class="board_list">
		<li>
			<span class="col1">번호</span>
			<span class="col2">제목</span>
			<span class="col3">글쓴이</span>
			<span class="col4">등록일</span>
		</li>
<?php
	$con = mysqli_connect("localhost", "user", "12345", "sample");		// DB 연결
	$sql = "select * from freeboard order by num desc";		// 일련번호 내림차순 전체 레코드 검색
	$result = mysqli_query($con, $sql);			// SQL 명령 실행
	$total_record = mysqli_num_rows($result); // 전체 글 수

	$number = $total_record;				// 글 번호 매김
   	for ($i=0; $i<$total_record; $i++) {
      	mysqli_data_seek($result, $i); 		// 가져올 레코드로 위치(포인터) 이동      	
      	$row = mysqli_fetch_assoc($result); // 하나의 레코드 가져오기

	  	$num         = $row["num"];			// 일련번호
	  	$name        = $row["name"];		// 이름
	  	$subject     = $row["subject"];		// 제목
      	$regist_day  = $row["regist_day"]; 	// 작성일
?>
		<li>
			<span class="col1"><?=$number?></span>		
			<span class="col2"><a href="view.php?num=<?=$num?>"><?=$subject?></a></span>
			<span class="col3"><?=$name?></span>
			<span class="col4"><?=$regist_day?></span>
		</li>	
<?php
   	   $number--;
   	}
   	mysqli_close($con);
?>
	    </ul>
		<ul class="buttons">
			<li><button onclick="location.href='list.php'">목록</button></li>
			<li><button onclick="location.href='form.php'">글쓰기</button></li>
		</ul>		
</body>
</html>
```